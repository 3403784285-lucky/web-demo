<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音乐播放器</title>
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/left.css">
    <link rel="stylesheet" href="css/person.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="http://at.alicdn.com/t/c/font_4248113_ox2f1wjcyl.css">

</head>
<body>

<div class="container">
    <div class="container-head">
        <div class="topbar">
            <div class="topbar-item">
                <div class="mark">
                    <i class="iconfont icon-icon-spring-pink"></i>
                    <span>海棠花开</span>
                </div>
                <div>
                    <a href="javascript:window.history.back()" id="prePage" class="pre-page iconfont icon-fanhui"></a>

                </div>

                <div class="topbar-right-search">
                    <input type="text" placeholder="搜索">
                    <i class="iconfont icon-sousuo">
                    </i>
                </div>
                <div class="person">
                    <div class="image"><img id="avatar"/></div>
                    <a class="information" href="person.html">未登录</a>
                </div>
            </div>
        </div>
        <div class="main">
            <div class="main-left">
                <div class="item-left">
                    <!-- 列表标签 -->
                    <ul>
                        <li>
                            <div class="music-title">发现音乐</div>
                            <ul class="main-left-subnav">
                                <li>
                                    <a href="music.html" >
                                        <i class="iconfont icon-remen"></i>
                                        <span>热门推荐</span>
                                    </a>

                                </li>

                                <li>
                                    <a href="rankList.html">
                                        <i class="iconfont icon-yinleliebiao"></i>
                                        <span>新歌排行榜</span>
                                    </a>

                                </li>
                            </ul>
                        </li>
                        <li>
                            <div class="music-title">我的音乐</div>

                            <ul class="main-left-subnav">
                                <li>
                                    <a href="like.html" >
                                        <i class="iconfont icon-xihuan"></i>
                                        <span>我喜欢的音乐</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="load.html">
                                        <i class="iconfont icon-xiazai"></i>
                                        <span>本地与下载</span>
                                    </a>

                                </li>
                                <li>
                                    <a href="collect.html">
                                        <i class="iconfont icon-ego-favorite"></i>
                                        <span>我的收藏</span>
                                    </a>

                                </li>
                                <li>
                                    <a href="identify.html">
                                        <i class="iconfont icon-OTCrenzheng"></i>
                                        <span>歌手认证</span>
                                    </a>

                                </li>


                            </ul>
                        </li>
                        <li>
                            <div class="music-title">我的歌单</div>

                            <ul class="main-left-subnav">
                                <li>
                                    <a href="editplaylist.html" >
                                        <i class="iconfont icon-chuangjiangedan"></i>
                                        <span>创建歌单</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="person.html">
                                        <i class="iconfont icon-gedanbiaoqian"></i>
                                        <span>歌单合集</span>
                                    </a>

                                </li>



                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="main-right">
                <div class="top-main-right">
                    <div class="introduction">
                        <img id="avatarImg" src="img/music7.png"/>

                            <div class="name-block">
                                <div class="nickname">微凉花开</div>
                                <div class="modify-name">
                                    <div class="status">用户</div>
                                    <div class="gender iconfont icon-nvsheng"></div>
                                    <div class="edit"><a href="edit.html"> 编辑个人信息</a></div>
                                </div>
                                <div class="split"></div>
                                <div class="concern">
                                    <div class="concern-person concern-block">
                                        <div class="count-concern tagcount">&nbsp2</div>
                                        <div class="tagname">关注</div>
                                    </div>
                                    <div class="sx" ></div>
                                    <div class="concerned-person concern-block">
                                        <div class="count-concerned tagcount">&nbsp5</div>
                                        <div class="tagname">粉丝</div>
                                    </div>
                                </div>
                                <div class="birthday"></div>
                                <div class="signature">个人介绍:</div>
                                <br><br><br><br>
                            </div>


                    </div>
                    <div class="format">
                        <div class="format-header">
                            <div class="first format-part">创建的歌单</div>
                            <div class="second format-part">收藏的歌单</div>
                            <div class="third format-part"></div>
                        </div>
                        <div class="format-content">
                            <div class="content-first">
                                <div id="musicImageFrame">
                                    <img src="img/music3.jpg">
                                </div>
                                <div class="ranklisten uniqueId">听歌排行榜</div>
                                <div class="accumulatelisten uniqueCount" >累计听歌</div>
                            </div>
                            <div class="content-first">
                                <div>
                                    <img src="img/iLike.jpg">
                                </div>
                                <div class="ranklisten uniqueId">我喜欢的音乐</div>
                                <div class="accumulatelisten uniqueCount" >338首</div>
                            </div>

                        </div>

                    </div>
                </div>


            </div>
        </div>

    </div>
    <footer>
        <div class="footer_list">
            <div class="footer-btn">
                <div class="iconfont">
                    <img  class="music-image"></img>
                </div>
                <ul><li class="china">未知</li></ul>

                <div class="play-part">
                    <div   class="like iconfont icon-jushoucang"></div>
                    <div  class="model iconfont icon-yinleliebiao"></div>
                    <div class="prev iconfont icon-shangyishou-yuanshijituantubiao"></div>
                    <div   id="player" class="pause iconfont icon-zanting"></div>
                    <!-- <a  href="#" class="play iconfont icon-suspend"></a> -->
                    <div   class="next iconfont icon-xiayishou-yuanshijituantubiao"></div>

                    <div id="controlVolume">
                        <div id="volumeBarBgBorder">
                            <div id="volumeBarBg">
                                <div id="volumeBar"></div>
                            </div>
                        </div>
                        <div  class="loudness iconfont icon-yinliang"></div>

                    </div>
                    <div  class="music-list iconfont icon-ks3_music"></div>

                    <audio>
                        <source  type="audio/mp3">
                    </audio>
                    <div class="audio-bottom">
                        <span class="audio-length-current" id="audioCurTime">00:00</span>
                        <div class="process-bar-bg" id="processBarBg">
                            <span id="processDot"></span>
                            <div class="process-bar" id="processBar"></div>
                        </div>
                        <span class="audio-length-total" id="totalTime">00:00</span>
                    </div>
                    <div class="music-frame">

                        <div class="music-broadcast" style="margin-left: 20px;margin-top: 20px;">
                            <div class="now-play" style="font-size: 20px;font-weight: bolder;margin-bottom: 20px;">
                                当前播放
                            </div>
                            <div style="display: flex; line-height: 20px;margin-bottom: 10px; ">
                                <div style="font-size: 13px;color: #a6b0ba; margin-right: 250px;" >
                                    总共35首
                                </div>
                                <div class="delete-table" style="color: #7ba4ac;font-size: 15px;cursor: pointer;">
                                    清空列表
                                </div>
                            </div>
                            <div style="height: 1px;width: 100%;background: #d0d5ca;margin-bottom: 10px;">

                            </div>
                            <ul id="musicListLi" style="overflow-y: scroll;">


                            </ul>

                        </div>


                    </div>


                </div>
            </div>
        </div>
    </footer>
</div>
<!--如果运行不了顺序很重要-->
<script type="text/javascript" src="js/music.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    let param = new URLSearchParams();
    param.append('refreshToken', localStorage.getItem('refreshToken'));
    param.append('accessToken', localStorage.getItem('accessToken'));
    axios.post("http://localhost:8080/web-demo/userCopy/personInfo",param).then(function (response) {
        var data=response.data;
        if(data=="fail")
        {

        }
        else
        {

            var img=document.getElementById('avatarImg');
            var image=document.getElementById('avatar');
            var nameCopy=document.getElementsByClassName('information')[0];
            var name=document.getElementsByClassName('nickname')[0];
            var gender=document.getElementsByClassName('gender')[0];
            var concern=document.getElementsByClassName('count-concern')[0];
            var concerned=document.getElementsByClassName('count-concerned')[0];
            var signature=document.getElementsByClassName('signature')[0];
            img.src=data["image"];
            image.src=data["image"];
            name.innerHTML=data["name"];
            nameCopy.innerHTML=data["name"];
            if (data["gender"]=='2')
            {
                gender.classList.remove("iconfont icon-nvsheng");
                gender.classList.add("icon-nansheng");
            }
            concern.innerHTML='&nbsp'+data["concernCount"];
            concerned.innerHTML='&nbsp'+data["concernedCount"];
            signature.innerHTML='个人简介：'+data["signature"];
            localStorage.setItem("accessToken",data["accessToken"]);
            localStorage.setItem("refreshToken",data["refreshToken"]);
        }

    }).catch(function(error) {
        // 请求失败，提示错误信息
        console.error(error);
    });
</script>
<script>
    var formatPart=document.getElementsByClassName('format-part');
    for(let i=0;i<formatPart.length;i++)
    {
        formatPart[i].addEventListener('click',function ()
        {
            if(i==0)
            {
                formatPart[1].style.color='black';
                formatPart[0].style.color='#3DC07D';

            }
            else
            {
                formatPart[0].style.color='black';
                formatPart[1].style.color='#3DC07D';
            }

        });
    }
    document.getElementsByClassName('content-first')[1].addEventListener('click',function ()
    {
        window.location.href = '/web-demo/like.html';
    });
</script>
</body>
</html>